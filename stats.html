<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Statistiche Clienti Avanzate</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<style>
body{font-family:Inter,Arial,sans-serif;margin:16px;background:#f4f6f8;color:#111;}
header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;}
header h1{margin:0;font-size:1.3rem;}
.filters{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:16px;align-items:center;}
button, select, input{font:inherit;padding:8px 10px;border-radius:8px;border:1px solid #ccc;background:#fff;}
.kpis{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;margin-bottom:16px;}
.card{background:#fff;padding:12px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.05);}
.card h4{margin:0;color:#555;font-size:0.85rem;}
.card p{margin:6px 0 0;font-weight:700;font-size:1.15rem;}
.main{display:grid;grid-template-columns:1fr 350px;gap:12px;}
.chart{min-height:300px;background:#fff;padding:8px;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.05);}
.right-panel{display:grid;gap:12px;}
.table-container{overflow:auto;border-radius:8px;}
table{width:100%;border-collapse:collapse;background:#fff;}
th,td{padding:8px 10px;border-bottom:1px solid #eee;text-align:left;font-size:0.95rem;}
th{background:#fafafa;cursor:pointer;}
tr.totale{font-weight:700;background:#f1f3f5;}
.small{font-size:0.85rem;color:#555;}
.tabs{display:flex;gap:8px;margin-bottom:8px;}
.tabs button.active{background:#2563eb;color:#fff;border-color:#2563eb;}
</style>
</head>
<body>
<header>
<h1>ðŸ“Š Statistiche Avanzate - Clienti</h1>
<div class="small">Analisi dettagliata dal vivo con previsione ore 9-17</div>
</header>

<section class="filters">
<label class="small">Da <input type="date" id="start-date"></label>
<label class="small">A <input type="date" id="end-date"></label>
<label class="small">Tipo
<select id="filter-type">
<option value="all">Tutti</option>
<option value="adulti">Adulti</option>
<option value="bambini">Bambini</option>
</select></label>
<button id="apply-filters">Applica</button>
<button id="reset-filters">Reset</button>
<button id="export-hourly">Esporta Oraria CSV</button>
</section>

<section class="kpis">
<div class="card"><h4>Clienti totali</h4><p id="kpi-total">0</p></div>
<div class="card"><h4>Incasso totale</h4><p id="kpi-revenue">0 â‚¬</p></div>
<div class="card"><h4>Media clienti/giorno</h4><p id="kpi-avg">0</p></div>
<div class="card"><h4>Saturazione max</h4><p id="kpi-saturation">0%</p></div>
<div class="card"><h4>Ora di picco stimata</h4><p id="kpi-peak">-</p></div>
<div class="card"><h4>Previsti client/h</h4><p id="kpi-predict">-</p></div>
</section>

<div class="main">
<div>
<div class="tabs">
<button class="tab-btn active" data-tab="per-hour">Tabella Oraria</button>
<button class="tab-btn" data-tab="occupancy">Occupazione</button>
<button class="tab-btn" data-tab="trend">Trend</button>
</div>

<div id="tab-per-hour" class="tab-panel">
<div class="table-container">
<table id="hourly-table">
<thead>
<tr>
<th data-col="hour">Ora</th><th data-col="adulti">Adulti</th><th data-col="bambini">Bambini</th>
<th data-col="totale">Totale</th><th data-col="incasso">Incasso (â‚¬)</th>
<th data-col="predicted">Previsti</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</div>

<div id="tab-occupancy" class="tab-panel" style="display:none;">
<div class="chart" id="chart-occupancy"></div>
</div>

<div id="tab-trend" class="tab-panel" style="display:none;">
<div class="chart" id="chart-trend-daily"></div>
</div>
</div>

<aside class="right-panel">
<div class="card">
<h4>Top fasce orarie</h4>
<div id="top-hours-list" class="small"></div>
</div>
<div class="card">
<h4>Azioni</h4>
<div style="display:flex;gap:8px;margin-top:8px;">
<button id="export-daily">Esporta Giornaliera CSV</button>
<button id="recompute">Ricalcola</button>
</div>
</div>
</aside>
</div>

<footer class="small" style="margin-top:16px;">Â© 2025 Cruscotto Clienti</footer>
<script src="stats.js"></script>
</body>
</html>
